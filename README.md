# Task Planner

## Описание проекта

**Task Planner** — это сервис-менеджер задач (планировщик) с простой авторизацией.  
Позволяет создавать, просматривать, редактировать, удалять и выполнять задачи с заданием дедлайна и правилами повторения.  
Вы можете:
- Добавлять задачи c названием, описанием, дедлайном, правилами повторения
- Редактировать, удалять и выполнять задачи
- Ввести пароль для авторизации пользователей

---

## Выполненные задания со звёздочкой

- Все задания повышенной трудности (*) **выполнены**.

---

## Как запустить проект локально

### 1. Установите Go (1.24+), если не установлен.

### 2. Подготовьте переменные окружения

Создайте файл `.env` в корне с содержимым:
```
TODO_DBFILE=data/scheduler.db      # Путь до базы данных (будет создан в этом файле/папке)
TODO_PASSWORD=123456               # Пароль для доступа к API
TODO_PORT=7540                     # Порт для запуска сервиса (например, 7540)
```

**Все переменные можно задать и вручную в окружении или перед запуском:**
```sh
export TODO_DBFILE=data/scheduler.db
export TODO_PASSWORD=123456
export TODO_PORT=7540
```

**Адрес по умолчанию:**  
http://localhost:7540

### 3. Запустите проект

```sh
go run ./cmd
```
или если основной файл — просто `main.go`:
```sh
go run main.go
```

---

## Как запускать тесты

Выполните:
```sh
go test ./tests
```

**Перед этим откройте и проверьте настройки в `tests/settings.go`**  
Поля должны быть такими:
```go
Port    = <TODO_PORT>
DBFile  = ../<TODO_DBFILE>
FullNextDate = true
Search = true
Token = <токен авторизации, который вы получаете после входа в API>
```

---

## Инструкция по сборке и запуску через Docker

**1. Собрать Docker-образ:**
```sh
docker build -t planner .
```

**2. Запустить с нужными переменными:**
```sh
docker run -v $PWD/db:/planner/data \
  -e TODO_DBFILE=data/scheduler.db \
  -e TODO_PASSWORD=123456 \
  -e TODO_PORT=7540 \
  -p 7540:7540 \
  planner
```
- по умолчанию значения переменных, как в этом примере
- После запуска сервис будет доступен по адресу http://localhost:7540


**Вы также можете использовать файл .env и аргумент `--env-file`:**
```sh
docker run --env-file .env -v $PWD/db:/planner/data -p 7540:7540 planner
```

**База данных будет лежать в папке `db` внутри вашего проекта.**